# Windsurf Workflows

Описание воркфлоу для Windsurf IDE, расположенных в `.windsurf/workflows/`.

Все воркфлоу версионированы (текущая версия v1.5.0, кроме `dev-bumpversion` — v1.0.0) и разделены на три категории: **SDD** (Spec-Driven Development), **Documentation** и **Development**.

## SDD (Spec-Driven Development)

Группа воркфлоу, реализующих методологию разработки через спецификации. Полный цикл: спецификация → план → реализация → валидация.

### sdd-spec

Создаёт высокоуровневую спецификацию фичи на основе текстового описания от пользователя. Документ технологически нейтрален и содержит пользовательские сценарии (User Stories с приоритетами P1/P2/P3 в формате Given/When/Then), функциональные требования (FR-XXX с формулировками MUST/SHOULD/MAY), ключевые сущности и критерии успеха (SC-XXX). При неоднозначностях воркфлоу делает обоснованные допущения и фиксирует их в секции Assumptions. Результат записывается в `specs/.current/spec.md`.

### sdd-plan

Создаёт план реализации на основе готовой спецификации из `specs/.current/spec.md`. Исследует кодовую базу, определяет технический контекст (язык, фреймворки, базы данных), извлекает сущности и их связи, при необходимости генерирует API-контракты (OpenAPI/GraphQL) в `specs/.current/contracts/`. Разбивает работу на фазы и задачи с оценкой сложности (S/M/L), зависимостями и критериями проверки. Результат записывается в `specs/.current/plan.md`.

### sdd-implement

Реализует фичу, последовательно выполняя задачи из `specs/.current/plan.md` в соответствии со спецификацией. Поддерживает частичное выполнение (конкретные задачи, фазы, продолжение с определённого места). Для каждой задачи: исследует кодовую базу, реализует изменения, верифицирует результат и отмечает прогресс в файле плана. По завершении запускает общие проверки (сборка, линтер, тесты).

### sdd-validate

Проверяет полноту реализации фичи относительно спецификации и плана. Работает в двух режимах: полная валидация (spec.md + plan.md) и быстрая (quick.md). В полном режиме проверяет выполнение всех задач, покрытие функциональных требований, корректность сущностей, соответствие API-контрактам и достижение критериев успеха. Генерирует структурированный отчёт с таблицами статусов (PASS/PARTIAL/FAIL) и рекомендациями.

### sdd-quickspec

Создаёт облегчённый анализ для багфиксов и мелких задач, не требующих полной спецификации. Анализирует проблему, исследует кодовую базу, определяет root cause (для багов), составляет список затронутых файлов и предлагает решение с шагами верификации. Если задача оказывается сложнее ожидаемого, рекомендует переключиться на `/sdd-spec`. Результат записывается в `specs/.current/quick.md`.

### sdd-quickimpl

Реализует исправление или небольшое изменение по quick-спецификации из `specs/.current/quick.md`. Применяет изменения в порядке, указанном в спецификации, обновляет тесты, запускает верификацию и проектные проверки (линтер, тесты, сборка). По завершении обновляет CHANGELOG.

## Documentation

Группа воркфлоу для актуализации проектной документации.

### doc-agents

Актуализирует `AGENTS.md` — инструкцию для AI-агентов (и разработчиков) о структуре проекта, командах сборки/тестирования, правилах контрибуции и код-гайдлайнах. Собирает информацию из кодовой базы (конфигурационные файлы, структура директорий, паттерны кода), заполняет все секции шаблона (Project Overview, Technical Context, Project Structure, Build And Test Commands, Contribution Instructions, Code Guidelines) и верифицирует корректность команд.

### doc-readme

Актуализирует `README.md` как пользовательскую документацию для уже запущенной системы. Фокус на том, что продукт делает и как его использовать (не как установить). Включает: назначение, ментальную модель, возможности, пользовательские сценарии, входы/выходы, гарантии поведения. Установка, конфигурация и деплой выносятся в отдельные документы.

### doc-development

Актуализирует `DEVELOPMENT.md` — полное руководство для разработчиков. Покрывает: необходимые инструменты с точными версиями, пошаговую настройку окружения, все доступные команды (сборка, тесты, линтинг), рабочий процесс (бранчинг, PR), типичные задачи и troubleshooting.

### doc-deployment

Актуализирует `DEPLOYMENT.md` — документацию по продакшен-деплою. Актуален только для деплоящихся приложений (не библиотек). Анализирует кодовую базу на предмет: переменных окружения, инфраструктурных зависимостей (БД, кеши, очереди), внешних интеграций, конфигурации error reporting (Sentry и т.п.), логирования и health check эндпоинтов.

### doc-compress-changelog

Сжимает секцию `[Unreleased]` в `CHANGELOG.md`. Проверяет актуальность каждой записи относительно текущего кода (удаляет устаревшие), объединяет дублирующиеся подсекции, консолидирует связанные записи (инкрементальные добавления одной фичи, группы переменных окружения). Цель — сокращение количества записей на 30–50% без потери информации.

## Development

### dev-bumpversion

Обновляет версию во всех шаблонных воркфлоу и CHANGELOG. Принимает номер версии в формате semver (X.Y.Z). Заменяет `(vX.Y.Z)` в описаниях всех воркфлоу в `templates/workflows/`, переносит содержимое `[Unreleased]` в новую секцию с датой, обновляет ссылки на версии, синхронизирует файлы в `.windsurf/workflows/` и запускает `make verify-version`. Выдаёт команды для коммита и тегирования.
